(this["webpackJsonpreact-social-app"]=this["webpackJsonpreact-social-app"]||[]).push([[0],{120:function(e,t,s){},147:function(e,t,s){},148:function(e,t,s){},149:function(e,t,s){},151:function(e,t,s){},152:function(e,t,s){},153:function(e,t,s){},154:function(e,t,s){},155:function(e,t,s){},156:function(e,t,s){},157:function(e,t,s){},158:function(e,t,s){},159:function(e,t,s){},160:function(e,t,s){},161:function(e,t,s){},162:function(e,t,s){},163:function(e,t,s){},164:function(e,t,s){},194:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s.n(c),r=s(10),n=s.n(r),i=(s(120),s(4)),l=s.n(i),o=s(8),j=s(99),u=s.n(j).a.create({baseURL:"https://ettechsocial.herokuapp.com/api/"}),d=function(){var e=Object(o.a)(l.a.mark((function e(t,s){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"LOGIN_START"}),e.prev=1,e.next=4,u.post("auth/login",t);case 4:c=e.sent,s({type:"LOGIN_SUCCESS",payload:c.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"LOGIN_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,s){return e.apply(this,arguments)}}(),b=s(6),p=s(57),m=s(19),h=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"FOLLOW":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),{},{followings:[].concat(Object(p.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});case"UPLOAD":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),{},{profilePicture:t.payload})});case"UPDATE":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),{},{desc:t.payload.desc,city:t.payload.city,from:t.payload.from,relationship:t.payload.relationship,profilePicture:t.payload.profilePicture,coverPicture:t.payload.coverPicture,isFirstTime:t.payload.isFirstTime})});default:return e}},O=s(1),x={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},f=Object(c.createContext)(x),g=function(e){var t=e.children,s=Object(c.useReducer)(h,x),a=Object(b.a)(s,2),r=a[0],n=a[1];return Object(c.useEffect)((function(){localStorage.setItem("user",JSON.stringify(r.user))}),[r.user]),Object(O.jsx)(f.Provider,{value:{user:r.user,isFetching:r.isFetching,error:r.error,dispatch:n},children:t})},v=s(213),N=s(13);function y(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useContext)(f),a=s.user,r=s.isFetching,n=s.dispatch;return console.log(a),Object(O.jsx)("div",{className:"login",children:Object(O.jsxs)("div",{className:"loginWrapper",children:[Object(O.jsxs)("div",{className:"loginLeft",children:[Object(O.jsx)("h3",{className:"loginLogo",children:"EtTechSocial"}),Object(O.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on EtTechSocial."})]}),Object(O.jsx)("div",{className:"loginRight",children:Object(O.jsxs)("form",{className:"loginBox",onSubmit:function(s){s.preventDefault(),d({email:e.current.value,password:t.current.value},n)},children:[Object(O.jsx)("input",{placeholder:"Email",type:"Email",className:"loginInput",required:!0,ref:e}),Object(O.jsx)("input",{placeholder:"Password",type:"password",className:"loginInput",required:!0,minLength:"6",ref:t}),Object(O.jsx)("button",{type:"submit",className:"loginButton",disabled:r,children:r?Object(O.jsx)(v.a,{color:"white",size:"25px"}):"Log in"}),Object(O.jsx)("span",{className:"loginForgot",children:"Forgot Password?"}),Object(O.jsx)(N.b,{to:"/register",children:Object(O.jsx)("button",{className:"loginRegisterButton",children:"Create a New Account"})})]})})]})})}var I=s(12);s(147);function w(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useRef)(),a=Object(c.useRef)(),r=Object(I.g)(),n=Object(c.useContext)(f).user,i=Object(c.useState)(!1),l=Object(b.a)(i,2),o=l[0],j=l[1];localStorage.clear(),n&&window.location.reload(!0);return Object(O.jsx)("div",{className:"login1",children:Object(O.jsxs)("div",{className:"loginWrapper1",children:[Object(O.jsxs)("div",{className:"loginLeft1",children:[Object(O.jsx)("h3",{className:"loginLogo1",children:"EtTechSocial"}),Object(O.jsx)("span",{className:"loginDesc1",children:"Connect with friends and the world around you on EtTechSocial."})]}),Object(O.jsx)("div",{className:"loginRight1",children:Object(O.jsxs)("form",{className:"loginBox1",onSubmit:function(c){if(c.preventDefault(),j(!0),a.current.value!==s.current.value)console.log("not match"),s.current.setCustomValidity("Password don't match!"),setTimeout((function(){s.current.setCustomValidity("")}),5e3);else{console.log("match");var n={username:e.current.value,email:t.current.value,password:s.current.value};try{u.post("auth/register",n),setTimeout((function(){r.push("/login")}),2e3)}catch(i){console.log(i)}}},children:[Object(O.jsx)("input",{placeholder:"Username",ref:e,required:!0,type:"text",className:"loginInput1"}),Object(O.jsx)("input",{placeholder:"Email",ref:t,required:!0,type:"Email",className:"loginInput1"}),Object(O.jsx)("input",{placeholder:"Password",ref:s,required:!0,type:"password",className:"loginInput1",minLength:"6"}),Object(O.jsx)("input",{placeholder:"Password Again",ref:a,required:!0,type:"password",className:"loginInput1",minLength:"6"}),Object(O.jsx)("button",{className:"loginButton1",children:o?Object(O.jsx)(v.a,{color:"white",size:"25px"}):"Sign Up"}),Object(O.jsx)(N.b,{to:"/login",children:Object(O.jsx)("button",{className:"loginRegisterButton1",children:"Log In to Account"})})]})})]})})}s(148);var k=s(223),C=s(224),P=s(225),S=s(226),L=s(245),F=s(247),T=s(216),_=s(246),B=s(249),D=s(218),E=s(219),U=(s(149),s(217)),R=s(220),A=s(221),W=s(222);function q(e){var t=a.a.useState(null),s=Object(b.a)(t,2),c=s[0],r=s[1],n=Boolean(c),i=function(){r(null)};return Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)(L.a,{sx:{display:"flex",alignItems:"center",textAlign:"center"},children:Object(O.jsx)(F.a,{title:"Account settings",children:Object(O.jsx)(T.a,{onClick:function(e){r(e.currentTarget)},children:Object(O.jsx)("img",{className:"topbarImg",src:e.src,alt:""})})})}),Object(O.jsxs)(_.a,{anchorEl:c,open:n,onClose:i,onClick:i,transformOrigin:{horizontal:"left",vertical:"top"},anchorOrigin:{horizontal:"top",vertical:"bottom"},children:[Object(O.jsxs)(B.a,{children:[Object(O.jsx)(N.b,{to:"/profile/".concat(e.username),style:{textDecoration:"none",color:"black"},children:Object(O.jsxs)("div",{className:"avatarWrapper",children:[Object(O.jsx)("img",{className:"topbarImg",src:e.src,alt:""}),Object(O.jsx)("span",{children:"Profile"})]})}),Object(O.jsx)(U.a,{style:{position:"absolute",left:"80%",top:"10%"},className:"avatar"})]}),Object(O.jsx)(D.a,{}),Object(O.jsx)(N.b,{to:"/register",style:{textDecoration:"none",color:"black"},children:Object(O.jsxs)(B.a,{children:[Object(O.jsx)(E.a,{children:Object(O.jsx)(R.a,{fontSize:"small"})}),"Add another account"]})}),Object(O.jsx)(N.b,{to:"/setting/"+e.username,style:{textDecoration:"none",color:" black"},children:Object(O.jsxs)(B.a,{children:[Object(O.jsx)(E.a,{children:Object(O.jsx)(A.a,{fontSize:"small"})}),"Settings"]})}),Object(O.jsxs)(B.a,{onClick:function(){localStorage.clear(),window.location.reload()},children:[Object(O.jsx)(E.a,{children:Object(O.jsx)(W.a,{fontSize:"small"})}),"Logout"]})]})]})}function z(){var e=Object(c.useRef)();var t=Object(c.useContext)(f).user,s="https://ettechsocial.herokuapp.com/images/";return Object(O.jsxs)("div",{className:"topbarContainer",children:[Object(O.jsx)("div",{className:"topbarLeft",children:Object(O.jsx)(N.b,{to:"/",style:{textDecoration:"none"},children:Object(O.jsx)("span",{className:"logo",children:"EtTechSocial"})})}),Object(O.jsx)("div",{className:"topbarCenter",children:Object(O.jsxs)("form",{className:"searchbar",onSubmit:function(t){t.preventDefault(),console.log(e.current.value)},children:[Object(O.jsx)(k.a,{className:"searchIcon"}),Object(O.jsx)("input",{placeholder:"Search for friend,post or video",className:"searchInput",ref:e})]})}),Object(O.jsxs)("div",{className:"topbarRight",children:[Object(O.jsx)("div",{className:"topbarLinks",children:Object(O.jsx)(N.b,{to:"/",style:{textDecoration:"none",color:"white"},children:Object(O.jsx)("span",{className:"tobarLink",children:"Timeline"})})}),Object(O.jsxs)("div",{className:"topbarIcons",children:[Object(O.jsx)(N.b,{to:"/peoples",style:{textDecoration:"none",color:"white"},children:Object(O.jsxs)("div",{className:"topbarIconItem",children:[Object(O.jsx)(C.a,{}),Object(O.jsx)("span",{className:"topbarIconBadge",children:"1"})]})}),Object(O.jsx)(N.b,{to:"/messenger",style:{textDecoration:"none",color:"white"},children:Object(O.jsxs)("div",{className:"topbarIconItem",children:[Object(O.jsx)(P.a,{}),Object(O.jsx)("span",{className:"topbarIconBadge",children:"2"})]})}),Object(O.jsxs)("div",{className:"topbarIconItem",children:[Object(O.jsx)(S.a,{}),Object(O.jsx)("span",{className:"topbarIconBadge",children:"1"})]})]}),Object(O.jsx)(q,{src:t.profilePicture?s+t.profilePicture:s+"person/noAvatar.png",username:t.username})]})]})}s(151);var V=s(227),G=s(228),M=s(229),H=s(230),J=s(231),K=s(232),Q=s(233);function X(e){var t=e.user;return Object(O.jsxs)("li",{className:"sidebarFriend",children:[Object(O.jsx)("img",{src:"https://ettechsocial.herokuapp.com/images/"+t.profilePicture,alt:"",className:"sidebarFriendImg"}),Object(O.jsx)("span",{className:"sidebarFriendName",children:t.username})]})}function Y(){var e=Object(c.useContext)(f).user,t=Object(c.useState)([]),s=Object(b.a)(t,2),a=s[0],r=s[1];return Object(c.useEffect)((function(){(function(){var t=Object(o.a)(l.a.mark((function t(){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.get("/user/friends/"+e._id);case 2:s=t.sent,r(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(O.jsx)("div",{className:"sidebar",children:Object(O.jsxs)("div",{className:"sidebarWrapper",children:[Object(O.jsxs)("ul",{className:"sidebarList",children:[Object(O.jsx)(N.b,{to:"/peoples",style:{textDecoration:"none",color:"black"},children:Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(C.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Peoples"})]})}),Object(O.jsx)(N.b,{to:"/messenger",style:{textDecoration:"none",color:"black"},children:Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(P.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]})}),Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(V.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Videos"})]}),Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(G.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Groups"})]}),Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(M.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Bookmarks"})]}),Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(H.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Questions"})]}),Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(J.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Jobs"})]}),Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(K.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Events"})]}),Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(Q.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Courses"})]})]}),Object(O.jsx)("button",{className:"sidebarButton",children:"Show more"}),Object(O.jsx)("hr",{className:"sidebarHr"}),Object(O.jsx)("ul",{className:"sidebarFriendList",children:a.map((function(e){return Object(O.jsx)(X,{user:e})}))})]})})}s(152);var Z=[{id:1,profilePicture:"person/1.jpeg",username:"Safak Kocaoglu"},{id:2,profilePicture:"person/2.jpeg",username:"Janell Shrum"},{id:3,profilePicture:"person/3.jpeg",username:"Alex Durden"},{id:4,profilePicture:"person/4.jpeg",username:"Dora Hawks"},{id:5,profilePicture:"person/5.jpeg",username:"Thomas Holden"},{id:6,profilePicture:"person/6.jpeg",username:"Shirley Beauchamp"},{id:7,profilePicture:"person/7.jpeg",username:"Travis Bennett"},{id:8,profilePicture:"person/8.jpeg",username:"Kristen Thomas"},{id:9,profilePicture:"person/9.jpeg",username:"Gary Duty"},{id:10,profilePicture:"person/10.jpeg",username:"Safak Kocaoglu"}];function $(e){var t=e.user;return Object(O.jsxs)("li",{className:"rightbarFriend",children:[Object(O.jsxs)("div",{className:"rightbarProfileImgContainer",children:[Object(O.jsx)("img",{src:"https://ettechsocial.herokuapp.com/images/"+t.profilePicture,alt:"",className:"rightbarProfileImg"}),Object(O.jsx)("span",{className:"rightBarOnline"})]}),Object(O.jsx)("span",{className:"rightbarUsername",children:t.username})]})}var ee=s(234),te=s(235);function se(e){var t=e.user,s=(e.lowPixel,"https://ettechsocial.herokuapp.com/images/"),a=Object(c.useState)([]),r=Object(b.a)(a,2),n=r[0],i=r[1],j=Object(c.useState)([]),d=Object(b.a)(j,2),p=d[0],m=d[1],h=Object(c.useContext)(f),x=h.user,g=h.dispatch,v=Object(c.useState)(x.followings.includes(null===t||void 0===t?void 0:t._id)),y=Object(b.a)(v,2),I=y[0],w=y[1],k=Object(c.useState)(!1),C=Object(b.a)(k,2),P=C[0],S=C[1];console.log(I),Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.get("/user/friends/"+t._id);case 3:return s=e.sent,e.next=6,u.get("/user/followers/"+t._id);case 6:c=e.sent,i(s.data),m(c.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[t,I]),Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("/conversations/"+(null===t||void 0===t?void 0:t._id));case 2:c=e.sent,(null===(s=c.data[0])||void 0===s?void 0:s.members.includes(x._id))&&S(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,x]);var L=function(){var e=Object(o.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("i got clicked"),s={senderId:t._id,receiverId:x._id},e.prev=2,!I){e.next=9;break}return e.next=6,u.put("/user/".concat(t._id,"/unfollow"),{userId:x._id});case 6:g({type:"UNFOLLOW",payload:t._id}),e.next=16;break;case 9:return e.next=11,u.put("/user/".concat(t._id,"/follow"),{userId:x._id});case 11:if(P){e.next=15;break}return console.log(P+"new conversation"),e.next=15,u.post("/conversations",s);case 15:g({type:"FOLLOW",payload:t._id});case 16:w(!I),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(2);case 21:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}(),F=function(){return Object(O.jsxs)("div",{className:"homeRightBar",children:[Object(O.jsxs)("div",{className:"birthdayContainer",children:[Object(O.jsx)("img",{className:"birthdayImg",src:s+"gift.png",alt:""}),Object(O.jsxs)("span",{className:"birthdayText",children:[Object(O.jsx)("b",{children:"Pola Foster"})," and ",Object(O.jsx)("b",{children:"3 other friends"})," have a birhday today."]})]}),Object(O.jsx)("img",{className:"rightbarAd",src:s+"ad.png",alt:""}),Object(O.jsx)("h4",{className:"rightbarTitle",children:"Online Friends"}),Object(O.jsx)("ul",{className:"rightbarFriendList",children:Z.map((function(e){return Object(O.jsx)($,{user:e},e.id)}))})]})},T=function(){return Object(O.jsxs)("div",{className:"ProfileRightbar",children:[t.username!==x.username&&Object(O.jsxs)("button",{className:"rightbarFollowButton",onClick:L,children:[I?"Unfollow":"Follow",I?Object(O.jsx)(ee.a,{}):Object(O.jsx)(te.a,{})]}),Object(O.jsx)("h4",{className:"rightbarTitle",children:"User information"}),Object(O.jsxs)("div",{className:"rightbarInfo",children:[Object(O.jsxs)("div",{className:"rightbarInfoItem",children:[Object(O.jsx)("span",{className:"rightbarInfoKey",children:"City:"}),Object(O.jsx)("span",{className:"rightbarInfoValue",children:t.city})]}),Object(O.jsxs)("div",{className:"rightbarInfoItem",children:[Object(O.jsx)("span",{className:"rightbarInfoKey",children:"From:"}),Object(O.jsx)("span",{className:"rightbarInfoValue",children:t.from})]}),Object(O.jsxs)("div",{className:"rightbarInfoItem",children:[Object(O.jsx)("span",{className:"rightbarInfoKey",children:"Relationship:"}),Object(O.jsx)("span",{className:"rightbarInfoValue",children:1===t.relationship?"Single":2===t.relationship?"Married":"-"})]})]}),Object(O.jsx)("h4",{className:"rightbarTitle",children:"User followings"}),Object(O.jsx)("div",{className:"rightbarFollowings",children:n.map((function(e){return Object(O.jsx)(N.b,{to:"/profile/"+e.username,style:{textDecoration:"none"},children:Object(O.jsxs)("div",{className:"rightbarFollowing",children:[Object(O.jsx)("img",{src:e.profilePicture?s+e.profilePicture:s+"person/noAvatar.png",alt:"",className:"rightbarFollowingImg"}),Object(O.jsx)("span",{className:"rightbarFollowingName",children:e.username})]})})}))}),Object(O.jsx)("h4",{className:"rightbarTitle",children:"User followers"}),Object(O.jsx)("div",{className:"rightbarFollowings",children:p.map((function(e){return Object(O.jsx)(N.b,{to:"/profile/"+e.username,style:{textDecoration:"none"},children:Object(O.jsxs)("div",{className:"rightbarFollowing",children:[Object(O.jsx)("img",{src:e.profilePicture?s+e.profilePicture:s+"person/noAvatar.png",alt:"",className:"rightbarFollowingImg"}),Object(O.jsx)("span",{className:"rightbarFollowingName",children:e.username})]})})}))})]})};return Object(O.jsx)("div",{className:"rightbar",children:Object(O.jsx)("div",{className:"rightbarWrapper",children:t?Object(O.jsx)(T,{}):Object(O.jsx)(F,{})})})}s(153);var ce=s(236),ae=s(237),re=s(68);function ne(e){var t=e.post,s=Object(c.useState)(t.likes.length),a=Object(b.a)(s,2),r=a[0],n=a[1],i=Object(c.useState)(!1),j=Object(b.a)(i,2),d=j[0],p=j[1],m=Object(c.useState)({}),h=Object(b.a)(m,2),x=h[0],g=h[1],v="https://ettechsocial.herokuapp.com/images/",y=Object(c.useContext)(f).user;return Object(c.useEffect)((function(){p(t.likes.includes(y._id))}),[t.likes,y._id]),Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("/user?userId=".concat(t.userId));case 2:s=e.sent,g(s.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.userId]),Object(O.jsx)("div",{className:"post",children:Object(O.jsxs)("div",{className:"postWrapper",children:[Object(O.jsx)("div",{className:"postTop",children:Object(O.jsxs)("div",{className:"postTopLeft",children:[Object(O.jsx)(N.b,{to:"/profile/".concat(x.username),children:Object(O.jsx)("img",{src:x.profilePicture?v+x.profilePicture:v+"person/noAvatar.png",alt:"",className:"postProfileImg"})}),Object(O.jsx)("span",{className:"postUsername",children:x.username}),Object(O.jsx)("span",{className:"postDate",children:Object(re.a)(t.createdAt)})]})}),Object(O.jsxs)("div",{className:"postCenter",children:[Object(O.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),Object(O.jsx)("img",{className:"postImg",src:v+t.img,alt:""})]}),Object(O.jsx)("div",{className:"postBottom",children:Object(O.jsxs)("div",{className:"postBottomLeft",children:[Object(O.jsx)(ce.a,{className:"likeIcon",onClick:function(){!1===d&&(n(r+1),u.put("/posts/"+t._id+"/like",{userId:y._id}),p(!0))}}),Object(O.jsx)(ae.a,{className:"dislikeIcon",onClick:function(){!0===d&&(n(r-1),u.put("/posts/"+t._id+"/like",{userId:y._id}),p(!1))}}),Object(O.jsxs)("span",{className:"postLikeCounter",children:[r," people like it"]})]})})]})})}s(154);var ie=s(238),le=s(239),oe=s(240),je=s(241);function ue(){var e=Object(c.useContext)(f).user,t="https://ettechsocial.herokuapp.com/images/",s=Object(c.useRef)(),a=Object(c.useState)(null),r=Object(b.a)(a,2),n=r[0],i=r[1],j=function(){var t=Object(o.a)(l.a.mark((function t(c){var a,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),a={userId:e._id,desc:s.current.value},!n){t.next=16;break}return r=new FormData,i=Date.now()+n.name,r.append("name",i),r.append("file",n),a.img=i,console.log(a),t.prev=9,t.next=12,u.post("/upload",r);case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(9);case 16:return t.prev=16,t.next=19,u.post("/posts",a);case 19:window.location.reload(!1),t.next=24;break;case 22:t.prev=22,t.t1=t.catch(16);case 24:case"end":return t.stop()}}),t,null,[[9,14],[16,22]])})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"share",children:Object(O.jsxs)("div",{className:"shareWrapper",children:[Object(O.jsxs)("div",{className:"shareTop",children:[Object(O.jsx)("img",{className:"shareProfileImg",src:e.profilePicture?t+e.profilePicture:t+"person/noAvatar.png",alt:""}),Object(O.jsx)("input",{placeholder:"What's in your mind "+e.username+"?",className:"shareInput",ref:s})]}),Object(O.jsx)("hr",{className:"shareHr"}),n&&Object(O.jsxs)("div",{className:"shareImgContainer",children:[Object(O.jsx)("img",{className:"shareImg",src:URL.createObjectURL(n),alt:""}),Object(O.jsx)(U.a,{className:"shareCancelImg",onClick:function(){return i(null)}})]}),Object(O.jsxs)("form",{className:"shareBottom",onSubmit:j,children:[Object(O.jsxs)("div",{className:"shareOptions",children:[Object(O.jsxs)("label",{htmlFor:"file1",className:"shareOption",children:[Object(O.jsx)(ie.a,{htmlColor:"tomato",className:"shareIcon"}),Object(O.jsx)("span",{className:"shareOptionText",children:"Photo"}),Object(O.jsx)("input",{style:{display:"none"},type:"file",id:"file1",accept:".png,.jpeg,.jpg",onChange:function(e){return i(e.target.files[0])}})]}),Object(O.jsxs)("div",{className:"shareOption",children:[Object(O.jsx)(le.a,{htmlColor:"blue",className:"shareIcon"}),Object(O.jsx)("span",{className:"shareOptionText",children:"Tag"})]}),Object(O.jsxs)("div",{className:"shareOption",children:[Object(O.jsx)(oe.a,{htmlColor:"green",className:"shareIcon"}),Object(O.jsx)("span",{className:"shareOptionText",children:"Location"})]}),Object(O.jsxs)("div",{className:"shareOption",children:[Object(O.jsx)(je.a,{htmlColor:"goldenrod",className:"shareIcon"}),Object(O.jsx)("span",{className:"shareOptionText",children:"Feelings"})]})]}),Object(O.jsx)("button",{className:"shareButton",type:"submit",children:"Share"})]})]})})}s(155);function de(e){var t=e.username,s=(e.peoples,e.update,Object(c.useState)([])),a=Object(b.a)(s,2),r=a[0],n=a[1],i=Object(c.useContext)(f).user;return Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,u.get("/posts/profile/"+t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,u.get("posts/timeline/"+i._id);case 8:e.t0=e.sent;case 9:s=e.t0,n(s.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,i._id]),Object(O.jsx)("div",{className:"feed",children:Object(O.jsxs)("div",{className:"feedWrapper",children:[(t===i.username||!t)&&Object(O.jsx)(ue,{}),r.map((function(e){return Object(O.jsx)(ne,{post:e},e._id)}))]})})}s(156);function be(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(z,{}),Object(O.jsxs)("div",{className:"homeContainer",children:[Object(O.jsx)(Y,{}),Object(O.jsx)(de,{}),Object(O.jsx)(se,{})]})]})}var pe=s(54),me=(s(157),s(243)),he=s(242);function Oe(){var e,t="https://ettechsocial.herokuapp.com/images/",s=Object(c.useState)({}),a=Object(b.a)(s,2),r=a[0],n=a[1],i=Object(c.useState)(),j=Object(b.a)(i,2),d=j[0],p=j[1],m=Object(I.h)().username,h=Object(c.useState)(null),x=Object(b.a)(h,2),g=x[0],v=x[1],N=Object(c.useContext)(f),y=N.user,w=N.dispatch;Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("/user?username="+m);case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[m]),console.log();var k=function(){var e=Object(o.a)(l.a.mark((function e(t){var s,c,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(t.target.value),s={userId:y._id},!g){e.next=21;break}return c=new FormData,a=Date.now()+g.name,c.append("name",a),c.append("file",g),"cover"===t.target.value?s.coverPicture=a:s.profilePicture=a,r={owner:y._id,profilePicture:a},e.prev=10,e.next=13,u.post("/upload",c);case 13:if("profile"===t.target.value&&w({type:"UPLOAD",payload:a}),"profile"!==t.target.value){e.next=17;break}return e.next=17,u.put("/messages",r);case 17:e.next=21;break;case 19:e.prev=19,e.t0=e.catch(10);case 21:return e.prev=21,e.next=24,u.put("/user/"+y._id,s);case 24:window.location.reload(),e.next=29;break;case 27:e.prev=27,e.t1=e.catch(21);case 29:case"end":return e.stop()}}),e,null,[[10,19],[21,27]])})));return function(t){return e.apply(this,arguments)}}();return setInterval((function(){window.innerWidth<=430?p(!0):p(!1)}),1e3),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(z,{}),Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsx)(Y,{}),Object(O.jsxs)("div",{className:"profileRight",children:[Object(O.jsxs)("div",{className:"profileRightTop",children:[Object(O.jsxs)("div",{className:"profileCover",children:[Object(O.jsx)("img",{className:"profileCoverImg",src:r.coverPicture?t+r.coverPicture:t+"person/noCover.png",alt:""}),Object(O.jsx)("img",{className:"profileUserImg",src:r._id===y._id&&(y.profilePicture,1)||r.profilePicture?t+r.profilePicture:t+"person/noAvatar.png",alt:""}),y.username===r.username&&Object(O.jsxs)("form",{class:"uploadForm",children:[Object(O.jsxs)("label",{htmlFor:"file",children:[Object(O.jsx)("input",{className:"uploadProfile",onChange:function(e){return v(e.target.files[0])},type:"file",id:"file",style:{display:"none"}}),Object(O.jsx)("span",{children:"Click here "}),Object(O.jsx)(T.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(O.jsx)(he.a,{size:"30px"})})]}),Object(O.jsxs)("label",{htmlFor:"submit",class:"uploadButton",children:[Object(O.jsx)("input",{id:"submit",style:{display:"none"},type:"submit",onClick:k,value:"profile"}),Object(O.jsx)(me.a,{variant:"contained",color:"primary",component:"span",disabled:!g,children:"Upload Profile Picture"})]}),Object(O.jsxs)("label",{htmlFor:"submitCover",class:"uploadButton",children:[Object(O.jsx)("input",(e={id:"submitCover",style:{display:"none"},type:"submit",onClick:k},Object(pe.a)(e,"style",{display:"none"}),Object(pe.a)(e,"value","cover"),e)),Object(O.jsx)(me.a,{variant:"contained",color:"primary",component:"span",disabled:!g,children:"Upload Cover Picture"})]}),Object(O.jsx)("br",{})]})]}),Object(O.jsxs)("div",{className:"profileInfo",children:[Object(O.jsx)("h4",{className:"profileInfoName",children:r.username}),Object(O.jsx)("span",{className:"profileInfoDesc",children:r.desc})]}),Object(O.jsx)("div",{className:"lowPixelWidth",children:d&&Object(O.jsx)(se,{user:r})})]}),Object(O.jsxs)("div",{className:"profileRightBottom",children:[Object(O.jsx)(de,{username:m}),!1===d&&void 0!==r._id?Object(O.jsx)(se,{user:r}):null]})]})]})]})}s(158);function xe(e){var t=e.display,s=Object(c.useState)(null),a=Object(b.a)(s,2),r=a[0],n=a[1],i=Object(c.useState)(null),j=Object(b.a)(i,2),d=j[0],p=j[1],m=Object(c.useContext)(f),h=m.user,x=m.dispatch,g=Object(c.useRef)(),v=Object(c.useRef)(),N=Object(c.useRef)(),y=Object(c.useState)(0),I=Object(b.a)(y,2),w=I[0],k=I[1],C="https://ettechsocial.herokuapp.com/images/",P=function(){var e=Object(o.a)(l.a.mark((function e(t){var s,c,a,i,o,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s={desc:g.current.value,city:v.current.value,from:N.current.value,relationship:w,userId:h._id,isFirstTime:!1},null==r){e.next=15;break}return c=new FormData,a=Date.now()+r.name,c.append("name",a),c.append("file",r),s.profilePicture=a,e.prev=8,e.next=11,u.post("/upload",c);case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(8);case 15:if(null==d){e.next=28;break}return i=new FormData,o=Date.now()+d.name,i.append("name",o),i.append("file",d),s.coverPicture=o,e.prev=21,e.next=24,u.post("/upload",i);case 24:e.next=28;break;case 26:e.prev=26,e.t1=e.catch(21);case 28:return e.prev=28,e.next=31,u.put("/user/"+h._id,s);case 31:j=e.sent,n(null),p(null),x({type:"UPDATE",payload:j.data}),e.next=39;break;case 37:e.prev=37,e.t2=e.catch(28);case 39:console.log(s);case 40:case"end":return e.stop()}}),e,null,[[8,13],[21,26],[28,37]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:t?"info display":"info",children:Object(O.jsxs)("form",{className:"infoWrapper",onSubmit:P,children:[Object(O.jsxs)("div",{className:"formLeft",children:[Object(O.jsx)("span",{className:"leftLable",children:"UserInfo "}),Object(O.jsxs)("div",{className:"leftFormItem",children:[Object(O.jsx)("input",{placeholder:t?"bio=> "+h.desc:"bio",ref:g,type:"text",className:"inputField"}),Object(O.jsx)("input",{placeholder:t?"city=> "+h.city:"city",ref:v,type:"text",className:"inputField",required:!0}),Object(O.jsx)("input",{placeholder:t?"country=> "+h.from:"country",ref:N,type:"text",className:"inputField",required:!0})]}),Object(O.jsxs)("div",{className:"leftFormItem",children:[Object(O.jsx)("label",{className:"relationName",children:"relationship status"}),Object(O.jsxs)("div",{className:"relaitonOption",onChange:function(e){return k(e.target.value)},children:[t&&"1"===h.relationship?Object(O.jsxs)("label",{className:"relationButton",children:[Object(O.jsx)("input",{type:"radio",value:"1",checked:!0,name:"relationship"}),"single"]}):Object(O.jsxs)("label",{className:"relationButton",children:[Object(O.jsx)("input",{type:"radio",value:"1",name:"relationship"}),"single"]}),t&&"2"===h.relationship?Object(O.jsxs)("label",{className:"relationButton",children:[Object(O.jsx)("input",{type:"radio",value:"2",checked:!0,name:"relationship"}),"married"]}):Object(O.jsxs)("label",{className:"relationButton",children:[Object(O.jsx)("input",{type:"radio",value:"2",name:"relationship"}),"married"]}),t&&"0"===h.relationship?Object(O.jsxs)("label",{className:"relationButton",children:[Object(O.jsx)("input",{type:"radio",value:"0",checked:!0,name:"relationship"}),"none"]}):Object(O.jsxs)("label",{className:"relationButton",children:[Object(O.jsx)("input",{type:"radio",value:"0",name:"relationship"}),"none"]})]})]})]}),Object(O.jsxs)("div",{className:"formRight",children:[Object(O.jsxs)("span",{className:"rightLable",children:["User Profile",Object(O.jsx)(he.a,{size:"30px",color:"primary"})]}),Object(O.jsx)("div",{className:"uploadButton",children:Object(O.jsxs)("label",{htmlFor:"profile",children:[Object(O.jsx)("input",{id:"profile",type:"file",style:{display:"none"},onChange:function(e){return n(e.target.files[0])}}),Object(O.jsxs)(me.a,{variant:"contained",color:"primary",disabled:r,component:"span",children:[Object(O.jsx)(he.a,{size:"30px",color:"white"}),"Profile Picture"]})]})}),Object(O.jsx)("div",{className:"uploadButton",children:Object(O.jsxs)("label",{htmlFor:"cover",children:[Object(O.jsx)("input",{id:"cover",type:"file",style:{display:"none"},onChange:function(e){return p(e.target.files[0])}}),Object(O.jsxs)(me.a,{variant:"contained",disabled:d,color:"primary",component:"span",children:[Object(O.jsx)(he.a,{color:"white"}),"Cover Picture.."]})]})}),d&&Object(O.jsxs)("div",{className:"shareImgContainer2",children:[Object(O.jsx)("img",{className:"shareImg2",src:URL.createObjectURL(d),alt:""}),Object(O.jsx)(U.a,{className:"shareCancelImg2",onClick:function(){return p(null)}})]}),r&&Object(O.jsxs)("div",{className:"shareImgContainer1",children:[Object(O.jsx)("img",{className:"shareImg1",src:URL.createObjectURL(r),alt:"",style:{zIndex:"999"}}),Object(O.jsx)(U.a,{className:"shareCancelImg1",onClick:function(){return n(null)}})]}),t&&Object(O.jsx)("div",{className:"shareImgContainer3",children:Object(O.jsx)("img",{className:"shareImg1",src:C+h.profilePicture,alt:""})}),t&&Object(O.jsx)("div",{className:"shareImgContainer4",children:Object(O.jsx)("img",{className:"shareImg2",src:C+h.coverPicture,alt:""})})]}),Object(O.jsx)("label",{htmlFor:"submit",className:"nextButton",children:Object(O.jsx)(me.a,{variant:"contained",color:"primary",component:"span",children:t?"update":"Next"})}),Object(O.jsx)("input",{type:"submit",id:"submit",style:{display:"none"}})]})})})}function fe(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(z,{}),Object(O.jsx)(xe,{display:!0})]})}s(159),s(160);function ge(e){return Object(O.jsx)("div",{className:"share1",children:Object(O.jsxs)("div",{className:"shareWrapper1",children:[Object(O.jsxs)("div",{className:"shareTop1",children:[Object(O.jsx)("img",{className:"shareProfileImg1",src:"https://ettechsocial.herokuapp.com/images/"+e.src,alt:""}),Object(O.jsx)("input",{placeholder:e.name,className:"shareInput1"})]}),Object(O.jsx)("hr",{className:"shareHr1"}),Object(O.jsxs)("div",{className:"followInfo",children:[Object(O.jsx)("span",{className:"followValue",children:"followers "+e.followers}),Object(O.jsx)("span",{className:"followValue",children:"followings "+e.followings})]})]})})}var ve=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),s=t[0],a=t[1],r=Object(c.useContext)(f).user;return Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.get("/user/".concat(r._id,"/all"));case 3:t=e.sent,a(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[r._id]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(z,{}),Object(O.jsxs)("div",{className:"homeContainer",children:[Object(O.jsx)(Y,{}),Object(O.jsx)("div",{className:"peoples",children:Object(O.jsx)("ul",{className:"sidebarFriendList1",children:s.map((function(e){return Object(O.jsx)(N.b,{to:"profile/"+e.username,style:{textDecoration:"none",color:"black"},children:Object(O.jsx)(ge,{src:e.profilePicture?e.profilePicture:"person/noAvatar.png",name:e.username,followers:e.followers,followings:e.followings})})}))})}),Object(O.jsx)(se,{})]})]})};s(161);function Ne(e){var t=e.conversation,s=e.currentUser,a=Object(c.useState)(null),r=Object(b.a)(a,2),n=r[0],i=r[1],j=t.members.find((function(e){return e!==s._id}));return Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(t,s){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.get("/user?userId="+j);case 3:c=e.sent,i(c.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}})()()}),[t,j]),Object(O.jsx)(O.Fragment,{children:n&&Object(O.jsxs)("div",{className:"conversation",children:[Object(O.jsx)("img",{className:"conversationImg",src:n&&"https://ettechsocial.herokuapp.com/images/"+n.profilePicture,alt:""}),Object(O.jsx)("span",{className:"conversationName",children:n&&n.username})]})})}s(162);function ye(e){var t=e.message,s=e.own;return console.log(t),Object(O.jsxs)("div",{className:s?"message own":"message",children:[Object(O.jsxs)("div",{className:"messageTop",children:[Object(O.jsx)("img",{className:"messageImg",src:t&&"https://ettechsocial.herokuapp.com/images/"+t.profilePicture,alt:""}),Object(O.jsx)("p",{className:"messageText",children:t.text})]}),Object(O.jsx)("div",{className:"messageBottom",children:Object(re.a)(t.createdAt)})]})}s(163);function Ie(e){var t=e.onlineUsers,s=e.currentUser,a=e.setCurrentChat,r="https://ettechsocial.herokuapp.com/images/",n=Object(c.useState)([]),i=Object(b.a)(n,2),j=i[0],d=i[1],p=Object(c.useState)([]),m=Object(b.a)(p,2),h=m[0],x=m[1],f=Object(c.useState)([]),g=Object(b.a)(f,2),v=g[0],N=g[1];Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(t,c){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.get("/user/friends/"+s);case 3:a=e.sent,d(a.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,s){return e.apply(this,arguments)}})()()}),[s]),Object(c.useEffect)((function(){var e=[];t.forEach((function(t){e.push(t.userId)})),console.log("onlineUsers firing"),N(e)}),[t]),Object(c.useEffect)((function(){var e=[];j.forEach((function(t){v.includes(t._id)&&e.push(t)})),console.log("Friends online Firing"),x(e)}),[v,j]),console.log("finaly onine"),console.log(h);var y=function(){var e=Object(o.a)(l.a.mark((function e(t,c){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(document.querySelector(".chatBox").classList.toggle("hidden"),r=0;r<document.querySelectorAll(".conversation").length;r++)document.querySelectorAll(".conversation")[r].innerText!==t.target.innerText&&document.querySelectorAll(".conversation")[r].classList.toggle("displayHidden");return e.prev=2,e.next=5,u.get("/conversations/find/".concat(s,"/").concat(c._id));case 5:n=e.sent,a(n.data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,s){return e.apply(this,arguments)}}();function I(e){var t=e.info;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"onlinefriends ",onClick:function(e){return y(e,t)},children:[Object(O.jsxs)("div",{className:"onlineImgContainer",children:[Object(O.jsx)("img",{src:t?r+t.profilePicture:r+"person/noAvatar.png",alt:"",className:"onlinefriendsImg"}),Object(O.jsx)("div",{className:"onlineImgBadge"})]}),Object(O.jsx)("span",{className:"onlinefriendsName",children:t?t.username:"no name"})]})})}return Object(O.jsx)(O.Fragment,{children:h.map((function(e){return Object(O.jsx)(I,{info:e})}))})}s(164);var we=s(106);function ke(){var e=Object(c.useContext)(f).user,t=Object(c.useState)(null),s=Object(b.a)(t,2),a=s[0],r=s[1],n=Object(c.useState)(""),i=Object(b.a)(n,2),j=i[0],d=i[1],m=Object(c.useState)([]),h=Object(b.a)(m,2),x=h[0],g=h[1],v=Object(c.useState)(null),N=Object(b.a)(v,2),y=N[0],I=N[1],w=Object(c.useState)([]),k=Object(b.a)(w,2),C=k[0],P=k[1],S=Object(c.useState)([]),L=Object(b.a)(S,2),F=L[0],T=L[1],_=Object(c.useRef)(),B=Object(c.useRef)();Object(c.useEffect)((function(){_.current=Object(we.io)("ws://localhost:8900"),_.current.on("getMessage",(function(e){I({sender:e.senderId,text:e.text,profilePicture:e.profilePicture,createdAt:Date.now()})})),console.log("am firing socket")}),[]),Object(c.useEffect)((function(){y&&(null===a||void 0===a?void 0:a.members.includes(y.sender))&&g((function(e){return[].concat(Object(p.a)(e),[y])}))}),[y,a]),Object(c.useEffect)((function(){_.current.emit("addUser",e._id),_.current.on("getUsers",(function(e){console.log(e),T(e)}))}),[e]),Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.get("/messages/"+(null===a||void 0===a?void 0:a._id));case 3:t=e.sent,g(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(c.useEffect)((function(){(function(){var t=Object(o.a)(l.a.mark((function t(){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.get("/conversations/"+e._id);case 3:s=t.sent,console.log(s.data),P(s.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[e._id]);var D=function(){var t=Object(o.a)(l.a.mark((function t(s){var c,r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),c={sender:e._id,text:j,conversationId:a._id,profilePicture:e.profilePicture},r=a.members.find((function(t){return t!==e._id})),_.current.emit("sendMessage",{senderId:e._id,receiverId:r,text:j,profilePicture:e.profilePicture}),t.prev=4,t.next=7,u.post("/messages",c);case 7:n=t.sent,g([].concat(Object(p.a)(x),[n.data])),d(""),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e;null===(e=B.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[x]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(z,{}),Object(O.jsxs)("div",{className:"messenger",children:[Object(O.jsx)("div",{className:"chatMenu",children:Object(O.jsxs)("div",{className:"chatMenuWrapper",children:[Object(O.jsx)("input",{className:"chatMenuInput",placeholder:"Search for Friends",type:"text"}),C.map((function(t){return Object(O.jsx)("div",{onClick:function(e){return function(e,t){r(t),console.log(e.target.innerText),document.querySelector(".chatBox").classList.toggle("hidden");for(var s=0;s<document.querySelectorAll(".conversation").length;s++)document.querySelectorAll(".conversation")[s].innerText!==e.target.innerText&&document.querySelectorAll(".conversation")[s].classList.toggle("displayHidden")}(e,t)},children:Object(O.jsx)(Ne,{conversation:t,currentUser:e})})}))]})}),Object(O.jsx)("div",{className:"chatBox hidden",children:Object(O.jsx)("div",{className:"chatBoxWrapper",children:a?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"chatBoxTop",children:x.map((function(t){return Object(O.jsx)("div",{ref:B,children:Object(O.jsx)(ye,{message:t,own:t.sender===e._id})})}))}),Object(O.jsxs)("div",{className:"chatBoxBottom",children:[Object(O.jsx)("textarea",{name:"",placeholder:"write Somthing",className:"chatMessageInput",onChange:function(e){return d(e.target.value)},value:j}),Object(O.jsx)("button",{className:"chatSubmitButton",onClick:D,children:"send"})]})]}):Object(O.jsx)("span",{className:"noConversation",children:"open conversation to start a Chat"})})}),Object(O.jsx)("div",{className:"chatOnline",children:Object(O.jsxs)("div",{className:"chatOnlineWrapper",children:["online friends",Object(O.jsx)(Ie,{onlineUsers:F,currentUser:e._id,setCurrentChat:r})]})})]})]})}var Ce=function(){var e=Object(c.useContext)(f).user;function t(){return e&&e.isFirstTime?Object(O.jsx)(xe,{}):e?Object(O.jsx)(be,{}):e?void 0:Object(O.jsx)(y,{})}return Object(O.jsx)(N.a,{children:Object(O.jsxs)(I.d,{children:[Object(O.jsx)(I.b,{exact:!0,path:"/",children:Object(O.jsx)(t,{})}),Object(O.jsx)(I.b,{path:"/login",children:e?Object(O.jsx)(I.a,{to:"/"}):Object(O.jsx)(y,{})}),Object(O.jsx)(I.b,{path:"/register",children:Object(O.jsx)(w,{})}),Object(O.jsx)(I.b,{exact:!0,path:"/profile/:username",children:e?Object(O.jsx)(Oe,{}):Object(O.jsx)(I.a,{to:"/"})}),Object(O.jsx)(I.b,{exact:!0,path:"/peoples",children:Object(O.jsx)(ve,{})}),Object(O.jsx)(I.b,{path:"/setting/:username",children:e?Object(O.jsx)(fe,{}):Object(O.jsx)(I.a,{to:"/"})}),Object(O.jsx)(I.b,{path:"/messenger",children:e?Object(O.jsx)(ke,{}):Object(O.jsx)(I.a,{to:"/"})})]})})};n.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(g,{children:Object(O.jsx)(Ce,{})})}),document.getElementById("root"))}},[[194,1,2]]]);
//# sourceMappingURL=main.f309468f.chunk.js.map